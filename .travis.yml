language: node_js
node_js: node
sudo: false
cache:
  yarn: true
  directories:
  - node_modules
before_script:
- yarn
- git clone --quiet https://github.com/lit-kansai-members/music.git docs
- pushd docs
- git checkout -b gh-pages
- popd
script: npm start
env:
  global:
  - GIT_COMMITTER_NAME=Yugo Yagita
  - GIT_COMMITTER_EMAIL=2000ygkn0713@gmail.com
  - GIT_AUTHOR_NAME=Yugo Yagita
  - GIT_AUTHOR_EMAIL=2000ygkn0713@gmail
  - secure: "tNdy12U0srCv4g6GGj/HH4O/X1aTtZHITBOM6gCgQ29da4OBJy3v+2Lk7La8u1TpHLpvZbxsmW+i5DrlAsyjAlujNgmis3bmN8tW1YCqBxeubRGXV7ClxGa+JdycNf/K9YLG3S+Aw6AQy1B7Wtgdm0sAT2E8jYH3X8kktz9ggTF5M7NibmgzDWAp1hejnI4j0mzy+vohGElqN6aSnBIP9M8F+zTU3EPpRo7+O3eE3mJ9wDYBeZ4hpZwW/v0igvPzX294BvQRyhDVXHw+J5j5/ZK5IM//edeNIaS82kIO2c4pbgY2NExScS+eDpgOzSLbGdOaPS7FH9RGCZeTXuD4tf7UElQcIXML9hblgT4t9CnB4MWFwQ1V44xzMBSbOjxUA1UAOJUo2KRxNZqln18GmIuEDrN+3aSBSaoP+4hv/X9zuWMsH3eDdkRaj+aNoEVM0hRuIly9yTGAeLwc2QgeJ6FT+FMbAphS9JxEVs0hPfI2j7rUSBSod3nAmrdeqZupcFknTuSx6loNWcYuWKKPkGoZ0rwjhEtf03elabgc3LE+z3u0QC7OVwAulX8Su6dxTBs+GRXgdW6K/LJoBYpP2nCm29R6/5GK9DcI0cGsWOi3YrMSXhTclvIl7flbr/iMDGSanStOtViKHFY12ILJmmq/fGgAYM3lnyuHCFuWry4="
after_success:
- cd docs
- git add -A
- git commit -m '[bot] Automatic generation of html'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && echo "OK :)"'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push -f --quiet "https://${GH_TOKEN}@github.com/lit-kansai-members/music.git" master:master 2> /dev/null'
